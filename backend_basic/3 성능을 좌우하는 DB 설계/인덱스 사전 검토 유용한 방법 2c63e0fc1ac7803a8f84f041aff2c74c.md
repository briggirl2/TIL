# ì¸ë±ìŠ¤ ì‚¬ì „ ê²€í†  ìœ ìš©í•œ ë°©ë²•

DB ì„¤ê³„ ì‹œ ì¸ë±ìŠ¤ ì¤‘ë³µ ìƒì„±ì„ í”¼í•˜ê³  íš¨ìœ¨ì ì¸ ì¸ë±ìŠ¤ë¥¼ êµ¬ì¶•í•˜ê¸° ìœ„í•œ ì‚¬ì „ ê²€í† ëŠ” ë§¤ìš° ì¤‘ìš”í•©ë‹ˆë‹¤. ë§ì”€í•˜ì‹  ëŒ€ë¡œ, ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì¸ë±ìŠ¤ë¥¼ í™œìš©í•˜ê±°ë‚˜ ë” ê´‘ë²”ìœ„í•˜ê²Œ ì‚¬ìš©ë  ìˆ˜ ìˆëŠ” ì¸ë±ìŠ¤ë¥¼ ì°¾ëŠ” ê²ƒì´ í•µì‹¬ì…ë‹ˆë‹¤.

ì‚¬ì „ ê²€í† ì— ìœ ìš©í•œ ë°©ë²•ë“¤ì„ ì²´ê³„ì ìœ¼ë¡œ ì •ë¦¬í•˜ì—¬ ì„¤ëª…í•´ ë“œë¦´ê²Œìš”.

## ğŸ” ì¸ë±ìŠ¤ ì‚¬ì „ ê²€í†  ìœ ìš©í•œ ë°©ë²•

### 1. í˜„ì¬ ì¸ë±ìŠ¤ ë° í…Œì´ë¸” ì •ë³´ ì¡°íšŒ

ê°€ì¥ ê¸°ë³¸ì ì´ë©´ì„œë„ í•„ìˆ˜ì ì¸ ë‹¨ê³„ì…ë‹ˆë‹¤. ëŒ€ìƒ í…Œì´ë¸”ì— ì–´ë–¤ ì¸ë±ìŠ¤ê°€ ì–´ë–¤ ì»¬ëŸ¼ ìˆœì„œë¡œ ì •ì˜ë˜ì–´ ìˆëŠ”ì§€ ì •í™•íˆ íŒŒì•…í•´ì•¼ í•©ë‹ˆë‹¤.

- **DBMSë³„ ì¸ë±ìŠ¤ ì •ë³´ ì¡°íšŒ ì¿¼ë¦¬:**
    - **MySQL:** `SHOW INDEX FROM table_name;`
    - **PostgreSQL:**
        
        ```sql
        SELECT
            tablename, indexname, indexdef
        FROM
            pg_indexes
        WHERE
            tablename = 'table_name';
        ```
        
    - **Oracle:**
        
        ```sql
        SELECT
            index_name, column_name, column_position
        FROM
            user_ind_columns
        WHERE
            table_name = 'TABLE_NAME'
        ORDER BY
            index_name, column_position; 
        ```
        
- **ê²°ê³¼ ë¶„ì„:**
    - **ì»¬ëŸ¼ ìˆœì„œ:** ë³µí•© ì¸ë±ìŠ¤ì˜ ê²½ìš° ì»¬ëŸ¼ì˜ ìˆœì„œê°€ ë§¤ìš° ì¤‘ìš”í•©ë‹ˆë‹¤. ex) IDX(A,B,C)
    - **ì¸ë±ìŠ¤ ìœ í˜•:** B-Tree, Hash, GIN, GiST ë“± ì¸ë±ìŠ¤ ìœ í˜•ì„ í™•ì¸í•©ë‹ˆë‹¤.
    - **í¬í•¨ ì»¬ëŸ¼(Included Columns):** ì¼ë¶€ DBMSëŠ” ì¸ë±ìŠ¤ì— í¬í•¨ë§Œ ì‹œí‚¤ê³  ì •ë ¬ì— ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì»¬ëŸ¼ì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 2. ì¸ë±ìŠ¤ì˜ ì ‘ë‘ì‚¬ ì¼ì¹˜ ì›ë¦¬ ì´í•´ ë° í™œìš© (ê°€ì¥ ì¤‘ìš”)

ë³µí•© ì¸ë±ìŠ¤ì˜ ê°€ì¥ ì¤‘ìš”í•œ ì›ë¦¬ì…ë‹ˆë‹¤. ë³µí•© ì¸ë±ìŠ¤ IDX(C1,C2,C3)ê°€ ìˆì„ ë•Œ, ì´ ì¸ë±ìŠ¤ëŠ” ë‹¤ìŒ ì¿¼ë¦¬ë“¤ì„ ëª¨ë‘ íš¨ìœ¨ì ìœ¼ë¡œ ì§€ì›í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

| **ì¸ë±ìŠ¤ í™œìš© ì¿¼ë¦¬ ì¡°ê±´** | **í™œìš© ê°€ëŠ¥ ì—¬ë¶€** |
| --- | --- |
| `WHERE C1 = ...` | ê°€ëŠ¥ |
| `WHERE C1 = ... AND C2 = ...` | ê°€ëŠ¥ |
| `WHERE C1 = ... AND C2 = ... AND C3 = ...` | ê°€ëŠ¥ |
| `WHERE C2 = ...` | ë¶ˆê°€ëŠ¥ |
| `WHERE C2 = ... AND C3 = ...` | ë¶ˆê°€ëŠ¥ |
- **ì‚¬ì „ ê²€í†  ë°©ë²•**
    - **í•µì‹¬:** ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ë³µí•© ì¸ë±ìŠ¤ê°€ **ìƒˆ ì¸ë±ìŠ¤ì˜ ì»¬ëŸ¼ë“¤ì„ ìˆœì„œëŒ€ë¡œ ì ‘ë‘ì‚¬(Prefix)**ë¡œ í¬í•¨í•˜ê³  ìˆë‹¤ë©´, ìƒˆ ì¸ë±ìŠ¤ë¥¼ ì¶”ê°€í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.

### 3. í†µê³„ ë° ì‚¬ìš© íŒ¨í„´ ë¶„ì„

ì¸ë±ìŠ¤ëŠ” ìì£¼ ì‚¬ìš©ë˜ëŠ” ì¿¼ë¦¬ë¥¼ ìœ„í•´ ì¡´ì¬í•©ë‹ˆë‹¤. ìƒˆ ì¸ë±ìŠ¤ ì¶”ê°€ ì „ì— ê¸°ì¡´ ì¸ë±ìŠ¤ê°€ ì‹¤ì œë¡œ ì¿¼ë¦¬ì— ì–´ë–»ê²Œ ì‚¬ìš©ë˜ê³  ìˆëŠ”ì§€ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤.

- **ì‹¤í–‰ ê³„íš (Execution Plan) ë¶„ì„:**
    - ìƒˆ ì¸ë±ìŠ¤ë¥¼ ì¶”ê°€í•˜ë ¤ëŠ” ì¿¼ë¦¬ë¥¼ **EXPLAIN** ë˜ëŠ” **ì‹¤í–‰ ê³„íš ë³´ê¸°** ë„êµ¬ë¡œ ë¶„ì„í•©ë‹ˆë‹¤.
    - ê¸°ì¡´ ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¿¼ë¦¬ê°€ ì´ë¯¸ ì¶©ë¶„íˆ ë¹ ë¥´ê²Œ ì‹¤í–‰ë˜ê³  ìˆë‹¤ë©´ ìƒˆ ì¸ë±ìŠ¤ëŠ” ë¶ˆí•„ìš”í•©ë‹ˆë‹¤.
- **ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ì¸ë±ìŠ¤ ì‹ë³„:**
    - ì¼ë¶€ DBMSëŠ” ì¸ë±ìŠ¤ê°€ ë§ˆì§€ë§‰ìœ¼ë¡œ ì‚¬ìš©ëœ ì‹œê°„ì´ë‚˜ ì´ ì‚¬ìš© íšŸìˆ˜ë¥¼ ê¸°ë¡í•©ë‹ˆë‹¤. (ì˜ˆ: MySQLì˜ *performance_schema*, PostgreSQLì˜ *pg_stat_user_indexes*)
    - ë§Œì•½ ê¸°ì¡´ ì¸ë±ìŠ¤ê°€ ê±°ì˜ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤ë©´, ìƒˆ ì¸ë±ìŠ¤ë¥¼ ì¶”ê°€í•˜ê¸°ë³´ë‹¤ **ê¸°ì¡´ ì¸ë±ìŠ¤ë¥¼ ìˆ˜ì •í•˜ê±°ë‚˜ ì œê±°**í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤.

### 4. ì»¬ëŸ¼ì˜ ì¹´ë””ë„ë¦¬í‹° (Cardinality) ê³ ë ¤

ì¹´ë””ë„ë¦¬í‹°ëŠ” ì»¬ëŸ¼ì´ ê°€ì§ˆ ìˆ˜ ìˆëŠ” **ì¤‘ë³µë˜ì§€ ì•Šì€ ê°’ì˜ ìˆ˜**ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.

- **ì‚¬ì „ ê²€í†  ë°©ë²•:** ìƒˆë¡œ ì¸ë±ìŠ¤ë¥¼ ë§Œë“¤ ì»¬ëŸ¼ì˜ ì¹´ë””ë„ë¦¬í‹°ê°€ ë„ˆë¬´ ë‚®ë‹¤ë©´ (ì˜ˆ: ì„±ë³„, ì°¸/ê±°ì§“ í”Œë˜ê·¸ ë“±), í•´ë‹¹ ì»¬ëŸ¼ë§Œìœ¼ë¡œëŠ” ì¸ë±ìŠ¤ì˜ íš¨ìœ¨ì´ ë–¨ì–´ì§‘ë‹ˆë‹¤. ì´ ê²½ìš°, ì¹´ë””ë„ë¦¬í‹°ê°€ ë†’ì€ ì»¬ëŸ¼ì„ **ì•ì— ë°°ì¹˜í•˜ëŠ” ë³µí•© ì¸ë±ìŠ¤**ë¥¼ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤.

### 5. ì¿¼ë¦¬ ìµœì í™” ê²€í† 

ìƒˆ ì¸ë±ìŠ¤ë¥¼ ì¶”ê°€í•˜ê¸° ì „ì—, ì¿¼ë¦¬ ìì²´ë¥¼ ìµœì í™”í•  ìˆ˜ ìˆëŠ”ì§€ ê²€í† í•´ì•¼ í•©ë‹ˆë‹¤.

- **`WHERE` ì ˆì˜ í•¨ìˆ˜ ì‚¬ìš© ì§€ì–‘:** `WHERE DATE(created_at) = '...'` ì™€ ê°™ì´ ì¸ë±ìŠ¤ ì»¬ëŸ¼ì— í•¨ìˆ˜ë¥¼ ì ìš©í•˜ë©´ ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤ (Full Scan ë°œìƒ). ì´ ê²½ìš° ì¸ë±ìŠ¤ ì»¬ëŸ¼ë§Œ ì‚¬ìš©í•˜ë„ë¡ ì¿¼ë¦¬ë¥¼ ë³€ê²½í•´ì•¼ í•©ë‹ˆë‹¤. (`WHERE created_at >= '...' AND created_at < '...'`)
- **`LIKE '%ê²€ìƒ‰ì–´'` ì§€ì–‘:** ì¸ë±ìŠ¤ë¥¼ í™œìš©í•˜ê¸° ì–´ë µìŠµë‹ˆë‹¤. ì „ë¬¸ ê²€ìƒ‰(Full-Text Search) ì¸ë±ìŠ¤ë‚˜ ë‹¤ë¥¸ ê²€ìƒ‰ ì—”ì§„(Elasticsearch ë“±) ë„ì…ì„ ê³ ë ¤í•©ë‹ˆë‹¤.

---

### ğŸ“ ì‚¬ì „ ê²€í†  ì²´í¬ë¦¬ìŠ¤íŠ¸ ìš”ì•½

ìƒˆ ì¸ë±ìŠ¤ ìƒì„±ì„ ê²°ì •í•˜ê¸° ì „ì— ë‹¤ìŒ ì§ˆë¬¸ì— ë‹µí•´ ë³´ì„¸ìš”.

| **ì§ˆë¬¸** | **ëª©ì ** | **ì¡°ì¹˜** |
| --- | --- | --- |
| **Q1.** ëŒ€ìƒ í…Œì´ë¸”ì— í˜„ì¬ ì–´ë–¤ ì¸ë±ìŠ¤ê°€ ì •ì˜ë˜ì–´ ìˆëŠ”ê°€? | ì¤‘ë³µ ì¸ë±ìŠ¤ ë°©ì§€ | ì¸ë±ìŠ¤ ì¡°íšŒ ì¿¼ë¦¬ ì‹¤í–‰ (Step 1) |
| **Q2.** ê¸°ì¡´ ë³µí•© ì¸ë±ìŠ¤ê°€ ìƒˆ ì¸ë±ìŠ¤ì˜ ì»¬ëŸ¼ì„ **ìˆœì„œëŒ€ë¡œ ì ‘ë‘ì‚¬**ë¡œ í¬í•¨í•˜ëŠ”ê°€? | ì ‘ë‘ì‚¬ ì¼ì¹˜ ì›ë¦¬ í™•ì¸ | ì¸ë±ìŠ¤ ì»¬ëŸ¼ ìˆœì„œ ë¶„ì„ (Step 2) |
| **Q3.** ìƒˆ ì¸ë±ìŠ¤ ì—†ì´ `EXPLAIN`ìœ¼ë¡œ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í–ˆì„ ë•Œ ì´ë¯¸ ìµœì ì¸ê°€? | ì„±ëŠ¥ í–¥ìƒ í•„ìš”ì„± í™•ì¸ | ì‹¤í–‰ ê³„íš ë¶„ì„ (Step 3) |
| **Q4.** ìƒˆ ì¸ë±ìŠ¤ì˜ ì»¬ëŸ¼ ì¹´ë””ë„ë¦¬í‹°ê°€ ì¶©ë¶„íˆ ë†’ì€ê°€? | ì¸ë±ìŠ¤ íš¨ìœ¨ì„± í™•ì¸ | ì¹´ë””ë„ë¦¬í‹° í™•ì¸ (Step 4) |