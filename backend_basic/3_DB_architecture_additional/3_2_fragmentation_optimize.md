# λ‹¨νΈν™” μµμ ν™” λ°©λ²•

λ°μ΄ν„°λ² μ΄μ¤μ—μ„ μ¤λλ λ°μ΄ν„°λ¥Ό μ‚­μ ν•κ±°λ‚ λ°λ³µμ μΈ λ³€κ²½μ΄ μΌμ–΄λ‚  λ• λ°μƒν•λ” **λ‹¨νΈν™”(Fragmentation)** λ¬Έμ μ— λ€ν• μµμ ν™” λ°©λ²•μ€ DB μ„±λ¥ μ μ§€μ— λ§¤μ° μ¤‘μ”ν•©λ‹λ‹¤.

λ‹¨νΈν™”λ” λ””μ¤ν¬ I/O μ¦κ°€, μ €μ¥ κ³µκ°„ λ‚­λΉ„, κ·Έλ¦¬κ³  κ¶κ·Ήμ μΌλ΅ μΏΌλ¦¬ μ„±λ¥ μ €ν•λ¥Ό μΌμΌν‚¤λ” μ£Όλ²”μ…λ‹λ‹¤.

λ‹¨νΈν™”λ” ν¬κ² **λ°μ΄ν„° λ‹¨νΈν™” (Data Fragmentation)**μ™€ **μΈλ±μ¤ λ‹¨νΈν™” (Index Fragmentation)**λ΅ λ‚λ μ μμΌλ©°, κ°κ°μ— λ€ν• μµμ ν™” λ°©λ²•μ€ λ‹¤μκ³Ό κ°™μµλ‹λ‹¤.

## π’Ύ λ‹¨νΈν™” μµμ ν™” λ°©λ²•

### 1. λ¬Όλ¦¬μ  λ‹¨νΈν™” μµμ ν™” (λ°μ΄ν„° λ° μΈλ±μ¤)

μ΄ λ°©λ²•μ€ λ°μ΄ν„°λ‚ μΈλ±μ¤μ λ¬Όλ¦¬μ μΈ μ €μ¥ μμ„λ¥Ό μ¬μ •λ ¬ν•μ—¬ λ‹¨νΈν™”λ κ³µκ°„μ„ μ κ±°ν•κ³  μ—°μ†λ κ³µκ°„μ„ ν™•λ³΄ν•λ” λ°©λ²•μ…λ‹λ‹¤.

### A. ν…μ΄λΈ” λ° μΈλ±μ¤ μ¬κµ¬μ„± (Reorganize) / μ¬λΉλ“ (Rebuild)

λ€λ¶€λ¶„μ DBMSκ°€ μ κ³µν•λ” ν•µμ‹¬ μµμ ν™” λ°©λ²•μ…λ‹λ‹¤.

| λ°©λ²• | μ£Όμ” λ™μ‘ | ν¨κ³Ό |
| --- | --- | --- |
| **μ¬λΉλ“ (Rebuild)** | μΈλ±μ¤ μ „μ²΄λ¥Ό **μ‚­μ  ν›„ μƒλ΅ μƒμ„±**ν•©λ‹λ‹¤. λ¬Όλ¦¬μ μΈ μ—°μ†μ„±μ΄ μ™„λ²½ν•κ² λ³µκµ¬λ©λ‹λ‹¤. | **κ°€μ¥ κ°•λ ¥ν•** λ‹¨νΈν™” μ κ±° ν¨κ³Ό. λ””μ¤ν¬ κ³µκ°„ μ™„μ „ νμ. |
| **μ¬κµ¬μ„± (Reorganize)** | μΈλ±μ¤ νμ΄μ§€ μμ„λ¥Ό **λ…Όλ¦¬μ μΌλ΅ μ¬μ •λ ¬**ν•©λ‹λ‹¤. κΈ°μ΅΄ κ³µκ°„μ„ ν™μ©ν•©λ‹λ‹¤. | λ‚®μ€ λ‹¨νΈν™” μμ¤€μ— μ ν•©. **μ¨λΌμΈ μ‘μ—…**μ΄ κ°€λ¥ν•μ—¬ μ„λΉ„μ¤ μ¤‘λ‹¨ μµμ†ν™”. |
- **μ‹¤ν–‰ μ‹μ :**
    - **λ‹¨νΈν™”μ¨μ΄ λ†’μ„ λ• (λ³΄ν†µ 30% μ΄μƒ):** **Rebuild**λ¥Ό μν–‰ν•©λ‹λ‹¤.
    - **λ‹¨νΈν™”μ¨μ΄ λ‚®μ„ λ• (10% ~ 30% μ‚¬μ΄):** **Reorganize**λ¥Ό μν–‰ν•©λ‹λ‹¤.
- **DBMSλ³„ λ…λ Ήμ–΄ (μμ‹):**
    - **SQL Server:** `ALTER INDEX ALL ON table_name REBUILD;`
    - **MySQL (InnoDB):** `OPTIMIZE TABLE table_name;` (ν…μ΄λΈ”μ„ λ³µμ‚¬ν•μ—¬ μµμ ν™”)

### B. μ£ΌκΈ°μ μΈ νν‹°μ…”λ‹ μ¬κµ¬μ„± (Partition Maintenance)

ν…μ΄λΈ”μ΄ νν‹°μ…”λ‹λμ–΄ μλ‹¤λ©΄, λ‹¨νΈν™”κ°€ μ‹¬ν• νΉμ • νν‹°μ…λ§ λ€μƒμΌλ΅ **νν‹°μ… λ¶„ν•  (Split) λλ” λ³‘ν•© (Merge)**μ„ ν†µν•΄ λ°μ΄ν„°λ¥Ό μ¬κµ¬μ„±ν•  μ μμµλ‹λ‹¤.

- **μ¥μ :** μ „μ²΄ ν…μ΄λΈ”μ΄ μ•„λ‹ νΉμ • νν‹°μ…λ§ μ‘μ—…ν•λ―€λ΅ μ‘μ—… μ‹κ°„μ΄ λ‹¨μ¶•λκ³  μ„λΉ„μ¤ μν–¥μ΄ μµμ†ν™”λ©λ‹λ‹¤.

### 2. λ…Όλ¦¬μ  λ‹¨νΈν™” μµμ ν™” (λ°μ΄ν„° μ‚­μ  μ „λµ)

λ‹¨νΈν™”κ°€ μ‹¬ν•΄μ§€λ” μ›μΈμΈ 'μ‚­μ ' μ‘μ—…μ„ μµμ ν™”ν•μ—¬ λ¬Όλ¦¬μ  λ‹¨νΈν™” λ°μƒμ„ μµμ†ν™”ν•©λ‹λ‹¤.

### A. λ€λ‰ μ‚­μ  μ‹ 'Trancate' μ‚¬μ©

- **λ€λ‰ μ‚­μ  (Full Table Delete):** ν…μ΄λΈ”μ λ¨λ“  λ°μ΄ν„°λ¥Ό μ‚­μ ν•΄μ•Ό ν•  λ• `DELETE FROM table_name;` λ€μ‹  `TRUNCATE TABLE table_name;`μ„ μ‚¬μ©ν•©λ‹λ‹¤.
    - **DELETE:** ν• ν–‰μ”© μ§€μ°λ©° νΈλμ­μ… λ΅κ·Έλ¥Ό λ‚¨κ²¨ λ‹¨νΈν™”λ¥Ό μ λ°ν•©λ‹λ‹¤.
    - **TRUNCATE:** ν…μ΄λΈ” κµ¬μ΅°λ§ λ‚¨κΈ°κ³  λ°μ΄ν„° νμ΄μ§€λ¥Ό ν†µμ§Έλ΅ ν•΄μ ν•μ—¬ λ‹¨νΈν™” μ—†μ΄ λΉ λ¥΄κ² κ³µκ°„μ„ νμν•©λ‹λ‹¤. (λ‹¨, νΈλμ­μ… λ΅¤λ°± λ¶κ°€μ— μ μν•΄μ•Ό ν•©λ‹λ‹¤.)

### B. ν…μ΄λΈ” νν‹°μ…”λ‹ (Partitioning)

μ¤λλ λ°μ΄ν„°λ¥Ό μ£ΌκΈ°μ μΌλ΅ μ‚­μ ν•΄μ•Ό ν•λ” κ²½μ°, νν‹°μ…”λ‹μ€ κ°€μ¥ ν¨κ³Όμ μΈ μ‚¬μ „ μλ°©μ±…μ…λ‹λ‹¤.

- **μ „λµ:** λ°μ΄ν„° μƒμ„± μΌμ(Date) λ“±μ„ κΈ°μ¤€μΌλ΅ νν‹°μ…μ„ λ‚λ•λ‹λ‹¤.
- **μ‚­μ  λ°©λ²•:** μ¤λλ λ°μ΄ν„°λ¥Ό μ§€μΈ λ• `DELETE` λ¬Έμ΄ μ•„λ‹, **ν•΄λ‹Ή νν‹°μ… μμ²΄λ¥Ό μ κ±° (DROP PARTITION)**ν•©λ‹λ‹¤.
- **ν¨κ³Ό:** νν‹°μ… μ κ±°λ” λ°μ΄ν„°λ² μ΄μ¤κ°€ ν•΄λ‹Ή λ°μ΄ν„°κ°€ μ €μ¥λ λ¬Όλ¦¬μ  κ³µκ°„ μ „μ²΄λ¥Ό μ¦‰μ‹ ν•΄μ ν•λ―€λ΅, **λ‹¨νΈν™”κ°€ λ°μƒν•μ§€ μ•κ³ ** μ„±λ¥ μ €ν• μ—†μ΄ κ³µκ°„μ„ νμν•  μ μμµλ‹λ‹¤.

### 3. λ―Έμ‚¬μ© μΈλ±μ¤ μ κ±°

μΈλ±μ¤λ„ λ°μ΄ν„°μ™€ λ§μ°¬κ°€μ§€λ΅ λ””μ¤ν¬ κ³µκ°„μ„ μ°¨μ§€ν•λ©° λ‹¨νΈν™”λ¥Ό μ λ°ν•©λ‹λ‹¤. λν•, μΈλ±μ¤κ°€ λ§μΌλ©΄ λ°μ΄ν„° λ³€κ²½(INSERT, UPDATE, DELETE) μ‹ μΈλ±μ¤ μ μ§€λ³΄μ μ‘μ—…μ΄ λμ–΄ I/Oκ°€ μ¦κ°€ν•©λ‹λ‹¤.

- **μµμ ν™” λ°©λ²•:** μ‚¬μ© λΉλ„κ°€ λ§¤μ° λ‚®κ±°λ‚ μ „ν€ μ‚¬μ©λμ§€ μ•λ” μΈλ±μ¤λ¥Ό μ£ΌκΈ°μ μΌλ΅ μ‹λ³„ν•κ³  μ κ±°ν•©λ‹λ‹¤.
    - μ΄λ” μ‹μ¤ν… λ¶€ν•λ¥Ό μ¤„μ΄κ³ , λ‚¨μ€ μΈλ±μ¤λ“¤μ ν¨μ¨μ μΈ κ΄€λ¦¬λ¥Ό λ•μµλ‹λ‹¤.

μ΄λ¬ν• μµμ ν™” μ‘μ—…λ“¤μ€ λ€λ¶€λ¶„ **μ •κΈ°μ μΈ μ μ§€λ³΄μ μ¤μΌ€μ¤„**μ„ μ„¤μ •ν•μ—¬ μ„λΉ„μ¤ λ¶€ν•κ°€ μ μ€ μ‹κ°„μ— μ‹¤ν–‰ν•λ” κ²ƒμ΄ μΌλ°μ μ…λ‹λ‹¤.